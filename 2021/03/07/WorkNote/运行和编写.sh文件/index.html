<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="utf-8">
    
    <title>
        运行和编写.sh文件 | Smith-bee Blog
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <link rel="shortcut icon" href="/images/favicon.png">
    
    
<link rel="stylesheet" href="/css/style.css">

    <script id="hexo-configurations">
    let CONFIG = {"hostname":"example.com","root":"/","localsearch":{"enable":true,"trigger":"auto","unescape":false,"preload":true},"themeInfo":{"name":"ILS","version":"2.0.2","author":"XPoet","repository":"https://github.com/XPoet/hexo-theme-ils"},"path":"search.json"};
  </script>
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Smith-bee Blog" type="application/atom+xml">
</head>


<body>
<div class="page-container">

    <header class="page-header">
        <div class="header-progress"></div>
    </header>

    <main class="page-main">

        <div class="page-main-content">

            <div class="page-main-content-top">
                <header class="header-wrapper">

    <div class="header-content">

        <a class="logo-title" href="/">
            Smith-bee Blog
        </a>

        <ul class="menu-list">
            
                <li class="menu-item">
                    <a class=""
                       href="/"
                    >
                        首页
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/archives"
                    >
                        归档
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/about"
                    >
                        关于
                    </a>
                </li>
            
        </ul>

        <div class="menu-bar">
            <div class="menu-bar-middle"></div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


            </div>

            <div class="page-main-content-middle">

                <main class="main-content normal-code-theme">

                    
                        <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <h3><a class="title-hover-animation">运行和编写.sh文件</a></h3>
        </div>

        <div class="meta-info">
            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa fa-calendar-o"></i> 2021-03-07 00:00:00
    </span>
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa fa-eye"></i> <span id="busuanzi_value_page_pv"></span>
        </span>
    
    
        <span class="article-wordcount article-meta-item">
        <i class="fa fa-book"></i> <span>1.2k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
        <i class="fa fa-clock-o"></i> <span>4 分钟</span>
        </span>
    
</div>

        </div>

        <div class="article-content markdown-body">
            <h2 id="1-运行-sh文件"><a href="#1-运行-sh文件" class="headerlink" title="1. 运行.sh文件"></a>1. 运行.sh文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（1）使用sh test.sh执行</span><br><span class="line">（2）使用bash test.sh 执行</span><br><span class="line">（3）使用点 .执行</span><br><span class="line">（4）使用source执行</span><br></pre></td></tr></table></figure>



<p><img src="https://gitee.com/smithbee/image_bed/raw/master/image-20210307000942656.png" alt="image-20210307000942656"></p>
<p><img src="https://gitee.com/smithbee/image_bed/raw/master/image-20210307001000173.png" alt="image-20210307001000173"></p>
<p> <img src="https://gitee.com/smithbee/image_bed/raw/master/image-20210307001034462.png" alt="image-20210307001034462"></p>
<p><strong>（1）使用sh test.sh执行</strong></p>
<p>使用 sh test.sh 来执行script文件，该方法标明使用 sh 这种shell来执行test.sh文件，sh已经是一种被bash替代的shell.</p>
<p>尽管我们在test.sh中声明使用 #!/bin/bash 来执行我们的文件，但此时使用sh而不是bash，则#!/bin/bash 已不起作用。</p>
<p><strong>（2）使用bash test.sh 执行</strong></p>
<p>该方法其实与 sh test.sh 的原理一样，只是使用了 /bin/bash 该种shell来执行我们的脚本文件。</p>
<p>所以，其实使用 dash test.sh’ 也是可以的，只是取决于自己想使用那种shell来执行脚本，</p>
<p>但sh、bash、dash三者有些许差别，对于部分关键字如 let，bash支持，而sh和dash并不支持，对于部分关键字则选择使用bash。</p>
<p><strong>（3）使用点 . 执行</strong></p>
<p>该种方式使用之前必须为文件添加执行的权限：</p>
<p>　　chmod +x test.sh</p>
<p>添加完执行权限之后，便可以使用 ./test.sh 来执行脚本，该方式与 bash test.sh 是一样的 ，默认使用 bin/bash 来执行我们的脚本。</p>
<p>只有该种执行方式需要对文件添加执行权限，其他方式并不需要。</p>
<p><strong>（4）使用source执行</strong></p>
<p>使用source则也能够直接执行我们的脚本：</p>
<p>　　source test.sh</p>
<p><strong>区别</strong></p>
<p>当我们使用 sh test.sh 、bash test.sh 、 ./test.sh 执行脚本的时候，该test.sh运行脚本都会使用一个新的shell环境来执行脚本内的命令，</p>
<p>也就是说，使用这3种方式时，其实script是在子进程的shell内执行，当子进程完成后，子进程内的各项变量和操作将会结束而不会传回到父进程中。</p>
<p>能否理解？看下面例子：</p>
<ol>
<li>[root@ubuntu] # bash test.sh</li>
<li>Please input your first name: yao &lt;==输入firstname</li>
<li>Please input your last name: pentonBin &lt;==输入lastname</li>
<li></li>
<li>Your full name is: yao pentonBin</li>
<li>[root@ubuntu] # echo $firstname</li>
<li>&lt;==这里没有输出</li>
</ol>
<p>如果使用source方法来执行脚本呢？</p>
<ol>
<li>[root@ubuntu] # source test.sh</li>
<li>Please input your first name: yao &lt;==输入firstname</li>
<li>Please input your last name: pentonBin &lt;==输入lastname</li>
<li></li>
<li>Your full name is: yao pentonBin</li>
<li>[root@ubuntu] # echo $firstname</li>
<li>yao &lt;==这里输出firstname</li>
</ol>
<p>也就是说，source方法执行脚本是在父进程中执行的，test.sh的各项操作都会在原本的shell内生效，</p>
<p>这也是为什么不注销系统而要让某些写入～/.bashrc的设置生效时，需要使用 source ~/.bashrc 而不能使用 bash ~/.bashrc</p>
<h2 id="2-编写-sh文件"><a href="#2-编写-sh文件" class="headerlink" title="2. 编写.sh文件"></a>2. 编写.sh文件</h2><p><strong>(1) 定义变量</strong>：变量名不加美元符号。<br>如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Num=1</span><br><span class="line">Var2=<span class="string">&quot;hello world!&quot;</span></span><br></pre></td></tr></table></figure>

<p> 注意：变量名和等号之间不能有空格。</p>
<p><strong>(2) 使用变量</strong>：使用一个定义过的变量，只要在变量名前面加美元符号即可.<br>如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">a=<span class="string">&quot;hello world!&quot;</span></span><br><span class="line">num=2</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;a is : <span class="variable">$a</span> num is : <span class="variable">$&#123;num&#125;</span>nd&quot;</span></span><br></pre></td></tr></table></figure>

<p>运行结果：<br>a is : hello world! num is : 2nd<br>说明：变量名外面的花括号是可选的，加不加都行，加花括号是为了帮助解释器识别变量的边界，我们通常加花括号。</p>
<p><strong>(3) 传递参数</strong><br>我们可以在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：n。n代表一个数字，1为执行脚本的第一个参数，2为执行脚本的第二个参数，以此类推……值得注意的是，n。n代表一个数字，1为执行脚本的第一个参数，2为执行脚本的第二个参数，以此类推……值得注意的是，0 获取到的是脚本路径以及脚本名，后面按顺序获取参数，<br>当参数超过10个时(包括10 个)，需要使用10,10,{11}….才能获取到参数，<br>但是一般很少会超过10 个参数的情况。</p>
<p>建立脚本文件test.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;脚本<span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第一个参数<span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;第二个参数<span class="variable">$2</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p> 调用的时候就可以：sh test.sh 2 3，输出如下：<br>脚本 test.sh<br>第一个参数2<br>第二个参数3</p>
<p><strong>(4) echo 命令</strong>： echo 用于字符串的输出，常用于观察系统变量的路径。<br>显示普通字符串：echo “learn linux”<br>显示系统库路径：echo $PATH PATH 就是一个系统变量，与windonws 下的环境变量相同，存储<br>默认库的搜索路径</p>
<p><strong>(5) Shell 脚本文件遍历目录</strong><br>问题：文件夹 /tmp 遍历</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> /tmp/*</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">　　<span class="built_in">echo</span> <span class="string">&quot;Hello, <span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/smithbee/image_bed/raw/master/image-20210307001144798.png" alt="image-20210307001144798"></p>
<p> <img src="https://gitee.com/smithbee/image_bed/raw/master/image-20210307001205481.png" alt="image-20210307001205481"></p>

        </div>

        <div class="article-nav">
            
            
                <div class="article-next">
                    <a class="next btn"
                       rel="next"
                       href="/2021/03/06/WorkNote/Linux%EF%BC%88Ubuntu%EF%BC%89%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4python%E7%89%88%E6%9C%AC/"
                    >
                        <span class="post-nav-title-item">Linux（Ubuntu）修改默认python版本</span><span class="post-nav-item">下一篇</span> <i class="fa fa-chevron-right"></i>
                    </a>
                </div>
            
        </div>

        <div class="comment-container">
            <div class="comments-container">
    
        
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <div id="gitalk-container"></div>
    <script>
        const gitalk = new Gitalk({
            clientID: '06caf322bbc7f08e1fc0',
            clientSecret: '37a65bdb3a1a5b32a82276451d4b5587364b71b1',
            repo: 'MyBlogComment',
            owner: 'Smith-bee',
            admin: ['Smith-bee'],
            id: location.pathname,
            language: 'zh-Hans'
        })
        gitalk.render('gitalk-container')
    </script>

    
</div>
        </div>
    </div>
</div>


                    

                </main>

            </div>

            <div class="page-main-content-bottom">
                <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy; 2021 <i class="fa fa-heart-o"></i> <a href="/">Smith-bee</a>
        </div>
        
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" style="display: none">
                        访问人数 <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" style="display: none">
                        总访问量 <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动 | 主题 <a
                    href="https://github.com/XPoet/hexo-theme-ils" target="_blank">ILS v2.0.2</a>
        </div>
    </div>
</footer>

            </div>
        </div>
    </main>

    <div class="sidebar-tools">
        <div class="tools-container">
    <ul class="tools-list">
        
            <li class="search popup-trigger">
                <i class="fa fa-search"></i>
            </li>
            
<script src="/js/local-search.js"></script>

        
        <li class="mode-toggle">
            <i class="fa fa-moon-o"></i>
        </li>
        
            <li class="rss">
                <a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a>
            </li>
        
        <li class="page-aside-toggle">
            <i class="fa fa-bars"></i>
        </li>
        
            <li class="scroll-to-top">
                <i class="fa fa-caret-up"></i>
            </li>
        
    </ul>
</div>

    </div>

    <!-- page aside -->
    <aside class="page-aside">
        
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%BF%90%E8%A1%8C-sh%E6%96%87%E4%BB%B6"><span class="nav-number">1.</span> <span class="nav-text">1. 运行.sh文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E7%BC%96%E5%86%99-sh%E6%96%87%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">2. 编写.sh文件</span></a></li></ol>
    </div>
</div>
        
    </aside>

</div>



    <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-icon">
            <i class="fa fa-search"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>



<script src="/js/main.js"></script>
<script src="/js/header-shrink.js"></script>
<script src="/js/toggle-mode.js"></script>



    
<script src="/js/scroll-to-top.js"></script>





    
        
<script src="/js/code-copy.js"></script>

    

    



</body>
</html>